{"aid": "jf7ujoyaize3ib", "result": {"status": "active", "unique_views": 45, "request_instructor_me": false, "change_log": [{"type": "create", "anon": "no", "when": "2018-03-23T03:32:44Z", "data": "jf3e494lxvn4eu", "uid": "hdjonbiyfs62ie"}, {"to": "jf3e494j3im4et", "anon": "no", "when": "2018-03-23T06:46:26Z", "type": "followup", "uid": "iswk6782g923e6"}, {"to": "jf3e494j3im4et", "anon": "no", "when": "2018-03-23T06:46:29Z", "type": "followup", "uid": "isvxeq6bspf1vn"}, {"to": "jf3e494j3im4et", "anon": "no", "when": "2018-03-23T06:46:37Z", "type": "followup", "uid": "i17iy2ly5py3ad"}, {"to": "jf3e494j3im4et", "anon": "no", "when": "2018-03-23T06:47:37Z", "type": "followup", "uid": "isvitc5696ruy"}, {"to": "jf3e494j3im4et", "anon": "no", "when": "2018-03-23T06:47:55Z", "type": "followup", "uid": "isyhiuebva42er"}, {"to": "jf3e494j3im4et", "anon": "no", "when": "2018-03-23T06:48:28Z", "type": "followup", "uid": "isxdbhdhumh328"}, {"to": "jf3e494j3im4et", "anon": "no", "when": "2018-03-23T06:49:28Z", "type": "followup", "uid": "isvu5gl72p04ph"}, {"to": "jf3e494j3im4et", "anon": "no", "when": "2018-03-23T13:50:09Z", "type": "feedback", "uid": "isvxeq6bspf1vn"}, {"to": "jf3e494j3im4et", "anon": "no", "when": "2018-03-23T13:52:08Z", "type": "feedback", "uid": "isvxeq6bspf1vn"}, {"to": "jf3e494j3im4et", "anon": "no", "when": "2018-03-25T05:19:41Z", "type": "feedback", "uid": "isyhiuebva42er"}, {"to": "jf3e494j3im4et", "anon": "no", "when": "2018-03-25T05:23:03Z", "type": "feedback", "uid": "isyhiuebva42er"}, {"to": "jf3e494j3im4et", "anon": "no", "when": "2018-03-25T13:07:00Z", "type": "feedback", "uid": "isvu5gl72p04ph"}, {"to": "jf3e494j3im4et", "anon": "no", "when": "2018-03-26T03:00:57Z", "type": "feedback", "uid": "iswk6782g923e6"}], "upvote_ids": [], "id": "jf3e494j3im4et", "bookmarked": 9, "tags": ["2018", "instructor-note", "lab8", "课堂问答"], "i_edits": [], "is_bookmarked": false, "children": [{"folders": [], "updated": "2018-03-23T06:46:26Z", "no_upvotes": 0, "uid": "iswk6782g923e6", "created": "2018-03-23T06:46:26Z", "type": "followup", "no_answer": 1, "id": "jf3l1cewrqa40m", "anon": "no", "bucket_name": "Last week", "config": {}, "bucket_order": 5, "data": null, "children": [{"folders": [], "updated": "2018-03-26T03:00:57Z", "uid": "iswk6782g923e6", "created": "2018-03-26T03:00:57Z", "type": "feedback", "id": "jf7naxvrw2b296", "anon": "no", "bucket_name": "Today", "config": {}, "bucket_order": 2, "data": null, "children": [], "subject": "<p></p><pre>Virtual Address 6653:\n  --&gt; pde index: 19  pde contents: (7f, valid 0, pfn 7f)\n    Page table does not exist.\n\nVirtual Address 1c13:\n  --&gt; pde index: 07  pde contents: (bd, valid 1, pfn 3d)\n    --&gt; pte index: 00  pte contents: (f6 valid 1, pfn 76)\n      --&gt; To Physical Address ed3 --&gt; Value: 12\n\nVirtual Address 6890:\n  --&gt; pde index: 1a  pde contents: (7f, valid 0, pfn 7f)\n    Page table does not exist.\n\nVirtual Address 0af6:\n  --&gt; pde index: 02  pde contents: (a1, valid 1, pfn 21)\n    --&gt; pte index: 17  pte contents: (7f valid 0, pfn 7f)\n      Invalid page table entry.\n\nVirtual Address 1e6f:\n  --&gt; pde index: 07  pde contents: (bd, valid 1, pfn 3d)\n    --&gt; pte index: 13  pte contents: (16 valid 0, pfn 16)\n      --&gt; To Disk Sector Address 2cf --&gt; Value: 1c</pre>\n<p>实现在附件中。<a href=\"https://d1b10bmlvqabco.cloudfront.net/attach/i5j09fnsl7k5x0/iswk6782g923e6/jf7n9w0tyhnz/translate.cpp\" target=\"_blank\">translate.cpp</a></p>"}], "subject": "<p>于志竟成</p>"}, {"folders": [], "updated": "2018-03-23T06:46:29Z", "no_upvotes": 0, "uid": "isvxeq6bspf1vn", "created": "2018-03-23T06:46:29Z", "type": "followup", "no_answer": 0, "id": "jf3l1fd8fl473a", "anon": "no", "bucket_name": "Last week", "config": {}, "bucket_order": 5, "data": null, "children": [{"folders": [], "updated": "2018-03-23T13:50:09Z", "uid": "isvxeq6bspf1vn", "created": "2018-03-23T13:50:09Z", "type": "feedback", "id": "jf4069a5oxn5k9", "anon": "no", "bucket_name": "Last week", "config": {}, "bucket_order": 5, "data": null, "children": [], "subject": "<p></p><pre>//C语言实现的虚拟存储结构模拟器<br /><br />#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\n#include &lt;assert.h&gt;\n\n#define INDEX(x,y) (x &lt;&lt; 5)&#43;y\n#define PDBR 0xd80\n#define PAGE_NUM(x) x &gt;&gt; 5\n#define PAGE_OFFSET(x) x &amp; 0x1f\n#define PDE_INDEX(x) x &gt;&gt; 10\n#define PTE_INDEX(x) (x &gt;&gt; 5) &amp; 0x1f\n#define VALID(x) (x &gt;&gt; 7) &amp; 0x1\n#define NUM(x) x &amp; 0x7f\n#define ADDR(x,y) (x &lt;&lt; 5)&#43;y\n\nint array[3] = {1,2,3};\nint hxnum(char temp){\n\tswitch(temp){\n\t\tcase &#39;a&#39;: return 10;\n\t\tcase &#39;b&#39;: return 11;\n\t\tcase &#39;c&#39;: return 12;\n\t\tcase &#39;d&#39;: return 13;\n\t\tcase &#39;e&#39;: return 14;\n\t\tcase &#39;f&#39;: return 15;\n\t\tdefault: return temp - &#39;0&#39;;\n\t\n\t}\n}\nint str2x(char * str,int len){\n\tassert(len &gt; 0);\n\tint sum = 0;\n\t\n\tfor (int i = 0; i &lt; len; i&#43;&#43;){\n\t\tsum &#43;= pow(16,(len - i - 1)) * hxnum(str[i]);\n\t}\n\n\treturn sum;\n}\nint get2(char* buffer, FILE* stream){\n    char s;\n    for(int i = 0; i &lt; 2; i&#43;&#43;){\n        if ((s = fgetc(stream)) == -1) return -1;\n        buffer[i] = s;\n    }\n    return 0;\n}\nint memory[128*32];\nint disk[128*32];\nvoid load(char* file_name, int * target){\n    FILE* stream;\n    char temp[2];\n    int row = 0;\n    int column = -1;\n    if((stream = fopen(file_name,&#34;r&#34;)) != NULL){\n        while(get2(temp,stream) != -1){\n            column&#43;&#43;;\n            if (column == 32){\n                column = 0;\n                row&#43;&#43;;\n            }\n            int ans = str2x(temp,2);\n            target[INDEX(row,column)] = ans;\n        }\n    }\n   \n}\n\n\nint main(int argc, char** argv){\n    load(&#34;M.txt&#34;,memory);\n    load(&#34;D.txt&#34;,disk);\n    \n    int num = str2x(argv[1]&#43;2,strlen(argv[1]) - 2);\n    int pde_index = PDE_INDEX(num);\n    int pte_index = PTE_INDEX(num);\n    int offset = PAGE_OFFSET(num);\n    \n    //Look up page dictionary\n    int pde_base = PDBR;\n    int pde_address = PDBR &#43; pde_index;\n    int pde_row = PAGE_NUM(pde_address);\n    int pde_column = PAGE_OFFSET(pde_address);\n    int pde_content = memory[INDEX(pde_row,pde_column)];\n    \n    //Look up page table\n    int pte_valid = VALID(pde_content);\n    int pte_num = NUM(pde_content);\n    int pte_row = pte_num;\n    int pte_column = pte_index;\n    int pte_content = pte_valid ? memory[INDEX(pte_row,pte_column)] : disk[INDEX(pte_row,pte_column)];\n    \n    //Get page\n    int valid = VALID(pte_content);\n    int number = NUM(pte_content);\n    int row = number;\n    int column = offset;\n    int address = ADDR(number,offset);\n    int answer = -1;\n    if (number != 0x7f) {\n        answer = valid ? memory[INDEX(row,column)] : disk[INDEX(row,column)];\n    }\n    \n    printf(&#34;Virtual Address %#x:\\n&#34;,num);\n    printf(&#34;  --&gt; pde index:%#x pde pos:(page %#x, offset %#x) pde contents:(%#x valid %d, pfn %#x)\\n&#34;, pde_index,pde_row, pde_column, pde_content,pte_valid,pte_num);\n    printf(&#34;    --&gt; pte index:%#x pte pos:(page %#x, offset %#x) pte contents:(%#x valid %d, pfn %#x)\\n&#34;, pte_index, pte_row, pte_column,pte_content, valid, number);\n    printf(&#34;      --&gt; To Physical Address %#x --&gt; &#34;,address);\n    answer == -1 ? printf(&#34;Does Not Exist A Page\\n&#34;) : printf(&#34;Value: %#x\\n&#34;,answer);\n\n    return 0;\n}</pre>\n<p></p>\n<p>使用C语言实现主要功能&#xff0c;使用如下python代码做数据预处理</p>\n<pre>import sys\nif __name__ == &#34;__main__&#34;:\n    file_object = open(str(sys.argv[1]),&#39;r&#39;)\n    lines = file_object.readlines()\n    file_object.close()\n    strings = []\n    for line in lines:\n        array = line.split(&#39; &#39;)[2:-1]\n        string = &#34;&#34;\n        print(line)\n        print(&#34; ----&gt; &#34;)\n        print(line.split(&#39; &#39;))\n        for i in array:\n            string = string &#43; i\n        strings.append(string)\n    \n    file_object = open(str(sys.argv[2]),&#39;w&#43;&#39;)\n    for string in strings:\n        file_object.write(string)\n    file_object.close()</pre>\n<p></p>\n<p>最终输出结果如下&#xff08;虚拟存储0x330和0x1e6f处的结果&#xff09;&#xff1a;</p>\n<p><img src=\"https://d1b10bmlvqabco.cloudfront.net/attach/i5j09fnsl7k5x0/isvxeq6bspf1vn/jf3zwfgtow8d/Screen_Shot_20180323_at_21.42.11.png\" alt=\"\" /></p>"}, {"folders": [], "updated": "2018-03-23T13:52:08Z", "uid": "isvxeq6bspf1vn", "created": "2018-03-23T13:52:08Z", "type": "feedback", "id": "jf408t37idb3b0", "anon": "no", "bucket_name": "Last week", "config": {}, "bucket_order": 5, "data": null, "children": [], "subject": "<p>网址 <a href=\"https://github.com/chyyuu/os_course_exercises/blob/2018spring/all/04-1-spoc-memdiskdata.md\">https://github.com/chyyuu/os_course_exercises/blob/2018spring/all/04-1-spoc-memdiskdata.md</a> <a href=\"https://github.com/chyyuu/os_course_exercises/blob/2018spring/all/04-1-spoc-memdiskdata.md最下方\">最下方</a>的样例有错</p>\n<pre><code>Virtual Address 106f:\n  --&gt; pde index:0x3  pde contents:(valid 1, pfn 0x2d)\n    --&gt; pte index:0x14  pte contents:(valid 0, pfn 0x06)\n      --&gt; To Disk Sector Address 0x127 --&gt; Value: 2c<br /><br />0x106f对应的pde index和pte index显然不会是0x3,0x14</code></pre>"}], "subject": "<p>魏钧宇</p>\n<p>2015011263</p>"}, {"folders": [], "updated": "2018-03-23T06:46:37Z", "no_upvotes": 0, "uid": "i17iy2ly5py3ad", "created": "2018-03-23T06:46:37Z", "type": "followup", "no_answer": 1, "id": "jf3l1lh1h9x12g", "anon": "no", "bucket_name": "Last week", "config": {}, "bucket_order": 5, "data": null, "children": [], "subject": "<p>于墨翰</p>\n<p>代码见<a href=\"https://github.com/oscourse-tsinghua/os2018-yumohan/blob/master/virtual%20address/page.py\">https://github.com/oscourse-tsinghua/os2018-yumohan/blob/master/virtual%20address/page.py</a><a href=\"https://github.com/oscourse-tsinghua/os2018-yumohan/blob/master/virtual%20address/page.py\" target=\"_blank\"></a></p>\n<p>和往届同学的参考结果一致</p>"}, {"folders": [], "updated": "2018-03-23T06:47:37Z", "no_upvotes": 0, "uid": "isvitc5696ruy", "created": "2018-03-23T06:47:37Z", "type": "followup", "no_answer": 1, "id": "jf3l2vlfdl44tu", "anon": "no", "bucket_name": "Last week", "config": {}, "bucket_order": 5, "data": null, "children": [], "subject": "<p>徐鉴劲</p>"}, {"folders": [], "updated": "2018-03-23T06:47:55Z", "no_upvotes": 0, "uid": "isyhiuebva42er", "created": "2018-03-23T06:47:55Z", "type": "followup", "no_answer": 1, "id": "jf3l395awux2v", "anon": "no", "bucket_name": "Last week", "config": {}, "bucket_order": 5, "data": null, "children": [{"folders": [], "updated": "2018-03-25T05:19:41Z", "uid": "isyhiuebva42er", "created": "2018-03-25T05:19:41Z", "type": "feedback", "d-bucket": "Yesterday", "id": "jf6cthw0jhr3u", "anon": "no", "bucket_name": "Yesterday", "config": {}, "bucket_order": 3, "data": null, "children": [], "subject": "<p><a href=\"https://d1b10bmlvqabco.cloudfront.net/attach/i5j09fnsl7k5x0/isyhiuebva42er/jf6csmwkrdtz/translate.py\" target=\"_blank\">translate.py</a></p>\n<p></p>\n<p>注意 0x7f的特例</p>"}, {"folders": [], "updated": "2018-03-25T05:23:03Z", "uid": "isyhiuebva42er", "created": "2018-03-25T05:23:03Z", "type": "feedback", "d-bucket": "Yesterday", "id": "jf6cxts0n9f2mm", "anon": "no", "bucket_name": "Yesterday", "config": {}, "bucket_order": 3, "data": null, "children": [], "subject": "<p></p><pre>Virtual Address 6653:<br />--&gt; pde index:0x19  pde content:(0x7f  0b1111111, valid 0, pfn 0x7f(page 0x7f))<br />Fault (page directory table entry not valid)\nVirtual Address 1c13:<br />--&gt; pde index:0x7  pde content:(0xbd  0b10111101, valid 1, pfn 0x3d(page 0x3d))<br />  --&gt; pte index:0x0(0b0)  pte contents:(0xf6 valid 1, pfn 0x0<br />  --&gt; To Physical Address 0x89(0b10001001) --&gt; Value: 12\nVirtual Address 6890:<br />--&gt; pde index:0x1a  pde content:(0x7f  0b1111111, valid 0, pfn 0x7f(page 0x7f))<br />Fault (page directory table entry not valid)\nVirtual Address 0af6:<br />--&gt; pde index:0x2  pde content:(0xa1  0b10100001, valid 1, pfn 0x21(page 0x21))<br />  --&gt; pte index:0x17(0b10111)  pte contents:(0x7f valid 0, pfn 0x0<br />Fault (page table entry not valid)\nVirtual Address 1e6f:<br />--&gt; pde index:0x7  pde content:(0xbd  0b10111101, valid 1, pfn 0x3d(page 0x3d))<br />  --&gt; pte index:0x13(0b10011)  pte contents:(0x16 valid 0, pfn 0x0<br />  --&gt; To Physical Address 0x25(0b100101) --&gt; Value: 1c</pre>\n<p></p>"}], "subject": "<p>鞠家兴</p>"}, {"folders": [], "updated": "2018-03-23T06:48:28Z", "no_upvotes": 0, "uid": "isxdbhdhumh328", "created": "2018-03-23T06:48:28Z", "type": "followup", "no_answer": 1, "id": "jf3l3yxi2vm1wj", "anon": "no", "bucket_name": "Last week", "config": {}, "bucket_order": 5, "data": null, "children": [], "subject": "<p>陈齐斌</p>"}, {"folders": [], "updated": "2018-03-23T06:49:28Z", "no_upvotes": 0, "uid": "isvu5gl72p04ph", "created": "2018-03-23T06:49:28Z", "type": "followup", "no_answer": 1, "id": "jf3l595gjs05q9", "anon": "no", "bucket_name": "Last week", "config": {}, "bucket_order": 5, "data": null, "children": [{"folders": [], "updated": "2018-03-25T13:07:00Z", "uid": "isvu5gl72p04ph", "created": "2018-03-25T13:07:00Z", "type": "feedback", "d-bucket": "Yesterday", "id": "jf6tih1anx745i", "anon": "no", "bucket_name": "Yesterday", "config": {}, "bucket_order": 3, "data": null, "children": [], "subject": "<p></p>\n<p></p>\n<p><a href=\"https://gist.github.com/otowa-kotori/cd63d478fe883f3cfdf36add0655c3ec\">https://gist.github.com/otowa-kotori/cd63d478fe883f3cfdf36add0655c3ec</a><a href=\"https://gist.github.com/otowa-kotori/cd63d478fe883f3cfdf36add0655c3ec\" target=\"_blank\"></a></p>\n<p></p>\n<p>example answers:</p>\n<pre>Virtual Address 0x6653(0110011001010011):\n\t--&gt; pde index:0x19  pde content:(0x7f(01111111), valid 0, pfn 0x7f)\nFault (page directory table entry not valid)\n\nVirtual Address 0x1c13(0001110000010011):\n\t--&gt; pde index:0x07  pde content:(0xbd(10111101), valid 1, pfn 0x3d)\n\t\t--&gt; pte index:0x00  pte content:(0xf6(11110110), valid 1, pfn 0x76)\n\t\t\t--&gt; To Physical Address 0xed3(111011010011) --&gt; Value: 0x12\n\nVirtual Address 0x6890(0110100010010000):\n\t--&gt; pde index:0x1a  pde content:(0x7f(01111111), valid 0, pfn 0x7f)\nFault (page directory table entry not valid)\n\nVirtual Address 0x0af6(0000101011110110):\n\t--&gt; pde index:0x02  pde content:(0xa1(10100001), valid 1, pfn 0x21)\n\t\t--&gt; pte index:0x17  pte content:(0x7f(01111111), valid 0, pfn 0x7f)\nFault (page table entry not valid)\n\nVirtual Address 0x1e6f(0001111001101111):\n\t--&gt; pde index:0x07  pde content:(0xbd(10111101), valid 1, pfn 0x3d)\n\t\t--&gt; pte index:0x13  pte content:(0x16(00010110), valid 0, pfn 0x16)\n\t\t\t--&gt; To Disk Sector Address 0x2cf(001011001111) --&gt; Value: 0x1c</pre>\n<p></p>"}], "subject": "<p>徐子涵</p>"}], "nr": 1172, "bucket_order": 2, "type": "note", "folders": ["2018", "lab8", "课堂问答"], "no_answer_followup": 6, "num_favorites": 0, "bucket_name": "Today", "q_edits": [], "data": {"embed_links": []}, "request_instructor": 0, "created": "2018-03-23T03:32:44Z", "is_tag_good": false, "config": {}, "s_edits": [], "my_favorite": false, "default_anonymity": "no", "t": 1522045423378, "tag_good": [], "tag_good_arr": [], "history": [{"content": "<p>有一台假想的计算机&#xff0c;页大小&#xff08;page size&#xff09;为32 Bytes&#xff0c;支持8KB的虚拟地址空间&#xff08;virtual address space&#xff09;,有4KB的物理内存空间&#xff08;physical memory&#xff09;&#xff0c;采用二级页表&#xff0c;一个页目录项&#xff08;page directory entry &#xff0c;PDE&#xff09;大小为1 Byte,一个页表项&#xff08;page-table entries PTEs&#xff09;大小为1 Byte&#xff0c;1个页目录表大小为32 Bytes&#xff0c;1个页表大小为32 Bytes。页目录基址寄存器&#xff08;page directory base register&#xff0c;PDBR&#xff09;保存了页目录表的物理地址&#xff08;按页对齐&#xff09;。</p>\n<p></p>\n<p>请手工计算后回答下列虚地址是否有合法对应的物理内存&#xff0c;请给出对应的pde index, pde contents, pte index, pte contents&#xff0c;the value of addr in phy page OR disk sector。</p>\n<p></p>\n<p>请写出一个translation程序&#xff08;可基于python、ruby、C、C&#43;&#43;、LISP、JavaScript等&#xff09;&#xff0c;输入是一个虚拟地址&#xff0c;依据物理内存模拟数据文件自动计算出对应的pde index, pde contents, pte index, pte contents&#xff0c;the value of addr in phy page OR disk sector。</p>\n<p></p>\n<p>题目&#xff1a;</p>\n<p><a href=\"https://github.com/chyyuu/os_course_exercises/blob/2018spring/all/04-1-spoc-discussion.md#%E8%99%9A%E6%8B%9F%E9%A1%B5%E5%BC%8F%E5%AD%98%E5%82%A8%E7%9A%84%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2\">https://github.com/chyyuu/os_course_exercises/blob/2018spring/all/04-1-spoc-discussion.md#%E8%99%9A%E6%8B%9F%E9%A1%B5%E5%BC%8F%E5%AD%98%E5%82%A8%E7%9A%84%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2</a></p>\n<p></p>\n<p>然后比较你的回答与往届同学的参考回复有什么不同&#xff0c;并说明原因。</p>\n<p></p>\n<p>下面是往届同学的参考回答&#xff1a;<br /><a href=\"https://www.piazza.com/class/i5j09fnsl7k5x0?cid=1012\">https://piazza.com/class/i5j09fnsl7k5x0?cid=1012</a></p>\n<p><a href=\"https://www.piazza.com/class/i5j09fnsl7k5x0?cid=696\">https://piazza.com/class/i5j09fnsl7k5x0?cid=696</a></p>\n<p><a href=\"https://www.piazza.com/class/i5j09fnsl7k5x0?cid=700\">https://piazza.com/class/i5j09fnsl7k5x0?cid=700</a></p>\n<p></p>", "anon": "no", "created": "2018-03-23T03:32:44Z", "uid": "hdjonbiyfs62ie", "subject": "2018春季-第八讲课堂实践练习"}]}, "error": null}