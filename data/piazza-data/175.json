{"aid": "igkp9cgmmhp325", "error": null, "result": {"default_anonymity": "no", "status": "active", "i_edits": [], "q_edits": [], "bookmarked": 25, "request_instructor": 0, "history": [{"uid": "hdjonbiyfs62ie", "anon": "no", "created": "2015-03-25T06:35:25Z", "content": "<p>请在这里回复下面链接的课堂题目的回答。</p>\n<p></p>\n<p><a href=\"https://github.com/xuyongjiande/os_exercises/blob/master/all/04-1-spoc-discussion.md#%E8%99%9A%E6%8B%9F%E9%A1%B5%E5%BC%8F%E5%AD%98%E5%82%A8%E7%9A%84%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2\">https://github.com/xuyongjiande/os_exercises/blob/master/all/04-1-spoc-discussion.md#%E8%99%9A%E6%8B%9F%E9%A1%B5%E5%BC%8F%E5%AD%98%E5%82%A8%E7%9A%84%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2</a></p>\n<p></p>", "subject": "第8讲课堂思考题回答"}], "s_edits": [], "tag_good_arr": [], "is_bookmarked": false, "my_favorite": false, "t": 1446635221077, "children": [{"uid": "i6s09f3xHOf", "no_answer": 0, "created": "2015-03-25T06:38:12Z", "id": "i7od0ul1m1i47r", "updated": "2015-03-25T06:38:12Z", "subject": "<p>李心成</p>\n<p>陈振寰</p>\n<p>Virtual Address 6653(0 110_01 10_010 1_0011):<br /> --&gt; pde index:0x19(11001) pde contents:(0x7f, 01111111, valid 0, pfn 0x7f)<br /> page 6c: e1 b5 a1 c1 b3 e4 a6 bd 7f 7f 7f 7f 7f 7f 7f 7f<br /> 7f 7f 7f 7f 7f 7f 7f 7f 7f 7f 7f 7f 7f 7f 7f 7f <br /> --&gt; unvaild</p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 3, "bucket_name": "Yesterday", "no_upvotes": 0, "d-bucket": "Yesterday", "children": [{"uid": "i6s09f3xHOf", "created": "2015-03-25T06:47:05Z", "id": "i7odc97773n68b", "updated": "2015-03-25T06:47:05Z", "subject": "<p>Virtual Address 1c13(0 001_11 00_000 1_0011):<br /> --&gt; pde index:0x7(00111) pde contents:(0xbd, 10111101, valid 1, pfn 0x3d)<br /> page 6c: e1 b5 a1 c1 b3 e4 a6 bd 7f 7f 7f 7f 7f 7f 7f 7f<br /> 7f 7f 7f 7f 7f 7f 7f 7f 7f 7f 7f 7f 7f 7f 7f 7f<br /> page 3d: f6 7f 5d 4d 7f 04 29 7f 1e 7f ef 51 0c 1c 7f 7f<br /> 7f 76 d1 16 7f 17 ab 55 9a 65 ba 7f 7f 0b 7f 7f <br /> --&gt; pte index:0x00 pte contents:(0xf6, valid 1, pfn 0x76)<br /> page 76: 1a 1b 1c 10 0c 15 08 19 1a 1b 12 1d 11 0d 14 1e <br /> 1c 18 02 12 0f 13 1a 07 16 03 06 18 0a 19 03 04<br /> --&gt; To Physical Address 0xed3(111011010011, 0xed3) --&gt; Value: 12</p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 3, "bucket_name": "Yesterday", "d-bucket": "Yesterday", "children": [], "type": "feedback"}], "type": "followup"}, {"uid": "i6uunp7jxDb", "no_answer": 0, "created": "2015-03-25T06:38:57Z", "id": "i7od1sudsyr23z", "updated": "2015-03-25T06:38:57Z", "subject": "<p>胡津铭</p>\n<p>沈光耀</p>\n<p>Virtual Address 6653(0_11001_10010_10011):<br />         --&gt; pde index:0x19  pde contents:(valid 0, pfn 0x7f)<br />             --&gt; Fault (page directory entry not valid)<br />     Virtual Address 1c13(0_00111_00000_10011):<br />         --&gt; pde index:0x7  pde contents:(valid 1, pfn 0x3d)<br />             --&gt; pte index:0x0  pte contents:(valid 1, pfn 0x76)<br />                 --&gt; To Physical Address 0xed3(0111011010011) --&gt;Value: 12<br />     Virtual Address 6890(0_11010_00100_10000):<br />         --&gt; pde index:0x1a pde contents:(valid 0, pfn 0x7f)<br />             --&gt; Fault (page directory entry not valid)<br />     Virtual Address 0af6(0_00010_10111_10110):<br />         --&gt; pde index:0x2  pde contents:(valid 1, pfn 0x21)<br />             --&gt; pte index:0x17 pte contents:(valid 0, pfn 0x7f)<br />                 --&gt; To Disk Sector Address 0x7ef(0111111101111) --&gt; Value: 04<br />     Virtual Address 1e6f(0_00111_10011_01111):<br />         --&gt; pde index:0x7  pde contents:(valid 1, pfn 0x3d)<br />             --&gt; pde index:0x13  pde contents:(valid 0, pfn 0x16)<br />                 --&gt; To Disk Sector Address 0x2cf(0001011001111) --&gt; Value: 1c</p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 3, "bucket_name": "Yesterday", "no_upvotes": 0, "d-bucket": "Yesterday", "children": [], "type": "followup"}, {"uid": "i6t6y9snjx2", "no_answer": 0, "created": "2015-03-25T06:40:40Z", "id": "i7od40fwsh82jy", "updated": "2015-03-25T06:40:40Z", "subject": "<p></p><p>Virtual Address 6653:</p>\n<p>pde index: 0x19 pde contentes:(valid 0 , pt 0x7f)</p>\n<p>Fault (page directory entry not valid)</p>\n<p></p>\n<p></p>\n<p>计25 矣晓沅</p>\n<p>计24 陈辉</p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 3, "bucket_name": "Yesterday", "no_upvotes": 0, "d-bucket": "Yesterday", "children": [], "type": "followup"}, {"uid": "hs2ssz7dkh76h6", "no_answer": 0, "created": "2015-03-25T06:42:26Z", "id": "i7od6agfx5n54p", "updated": "2015-03-25T06:42:26Z", "subject": "<p>田家申</p>\n<p>杨植麟</p>\n<p></p>\n<pre><br />PDE_BASE = 0xd80<br /><br />def read_storage(filename):<br />    mem = []<br />    for line in open(filename):<br />        inputs = line.strip().split(&#39;:&#39;)[1].strip().split()<br />        for cont in inputs: mem.append(int(cont, 16))<br />    return mem<br /><br />def get_cont(base, index, mem):<br />    return mem[base &#43; index]<br /><br />def handle_virtual(va):<br />    print &#39;Virtual Address 0x%x:&#39; %va<br /><br />    mem = read_storage(&#39;memory.in&#39;)<br />    disk = read_storage(&#39;disk.in&#39;)<br /><br />    pde_index = (va &amp; 0x7c00) &gt;&gt; 10<br />    pte_index = (va &amp; 0x3e0) &gt;&gt; 5<br />    offset = va &amp; 0x1f<br /><br />    pde_content = get_cont(PDE_BASE, pde_index, mem)<br />    pde_valid = pde_content &gt;&gt; 7<br />    pte_base = pde_content - (pde_valid &lt;&lt; 7)<br /><br />    print &#39;\\t--&gt; pde index: 0x%x pde contents: (valid 0x%x, pfn 0x%x)&#39; % (pde_index, pde_valid, pte_base)<br /><br />    if not pde_valid:<br />        print &#39;\\t\\t--&gt; Fault (page directory entry not valid)&#39;<br />        return<br /><br />    pte_content = get_cont(pte_base &lt;&lt; 5, pte_index, mem)<br />    pte_valid = pte_content &gt;&gt; 7<br />    phys_base = pte_content - (pte_valid &lt;&lt; 7)<br /><br />    print &#39;\\t\\t--&gt; pte index: 0x%x pte contents: (valid 0x%x, pfn 0x%x)&#39; % (pte_index, pte_valid, phys_base)<br /><br />    if not pte_valid:<br />        if phys_base != 0x7f:<br />            disk_content = get_cont(phys_base &lt;&lt; 5, offset, disk)<br />            print &#39;\\t\\t\\t--&gt; Translated to Disk Address 0x%x --&gt; Value 0x%x&#39; % ((phys_base &lt;&lt; 5) &#43; offset, disk_content)<br />        else:<br />            print &#39;\\t\\t\\t -&gt; Fault (page table entry not valid)&#39;<br />        return<br /><br />    phys_content = get_cont(phys_base &lt;&lt; 5, offset, mem)<br />    print &#39;\\t\\t\\t--&gt; Translated to Physical Address 0x%x --&gt; Value: 0x%x&#39; % ((phys_base &lt;&lt; 5) &#43; offset, phys_content)<br /><br />if __name__ == &#39;__main__&#39;:<br />    for line in open(&#39;request.in&#39;):<br />        handle_virtual(int(line.strip().split()[2], 16))</pre>\n<p>输出&#xff1a;</p>\n<p></p>\n<pre>Virtual Address 0x6653:<br />\t--&gt; pde index: 0x19 pde contents: (valid 0x0, pfn 0x7f)<br />\t\t--&gt; Fault (page directory entry not valid)<br />Virtual Address 0x1c13:<br />\t--&gt; pde index: 0x7 pde contents: (valid 0x1, pfn 0x3d)<br />\t\t--&gt; pte index: 0x0 pte contents: (valid 0x1, pfn 0x76)<br />\t\t\t--&gt; Translated to Physical Address 0xed3 --&gt; Value: 0x12<br />Virtual Address 0x6890:<br />\t--&gt; pde index: 0x1a pde contents: (valid 0x0, pfn 0x7f)<br />\t\t--&gt; Fault (page directory entry not valid)<br />Virtual Address 0xaf6:<br />\t--&gt; pde index: 0x2 pde contents: (valid 0x1, pfn 0x21)<br />\t\t--&gt; pte index: 0x17 pte contents: (valid 0x0, pfn 0x7f)<br />\t\t\t -&gt; Fault (page table entry not valid)<br />Virtual Address 0x1e6f:<br />\t--&gt; pde index: 0x7 pde contents: (valid 0x1, pfn 0x3d)<br />\t\t--&gt; pte index: 0x13 pte contents: (valid 0x0, pfn 0x16)<br />\t\t\t--&gt; Translated to Disk Address 0x2cf --&gt; Value 0x1c</pre>\n<p></p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 3, "bucket_name": "Yesterday", "no_upvotes": 0, "d-bucket": "Yesterday", "children": [{"uid": "hdjonbiyfs62ie", "created": "2015-03-25T10:48:04Z", "id": "i7oly66ge1n4w4", "updated": "2015-03-25T10:48:04Z", "subject": "<p>优秀回答。</p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 3, "bucket_name": "Yesterday", "d-bucket": "Yesterday", "children": [], "type": "feedback"}], "type": "followup"}, {"uid": "i6tawpo5Fm8", "no_answer": 0, "created": "2015-03-25T06:43:13Z", "id": "i7od7aogv3c5az", "updated": "2015-03-25T06:43:13Z", "subject": "张梦豪 2012011401\nVirtual Address 6653:\n --&gt; pde index:0x19  pde contents:(valid 0, pfn 0x7f)\n  Fault (page directory entry not valid)\nVirtual Address 1c13:\n --&gt; pde index:0x7  pde contents:(valid 1, pfn 0x3d)\n  --&gt; pte index:0x0  pte contents:(valid 1, pfn 0x76)\n   --&gt; Translates to Physical Address 0xed3 --&gt; Value:12\nVirtual Address 6890:\n --&gt; pde index:0x1a  pde contents:(valid 0, pfn 0x7f)\n  Fault (page directory entry not valid)\nVirtual Address af6:\n --&gt; pde index:0x2  pde contents:(valid 1, pfn 0x21)\n  --&gt; pte index:0x17  pte contents:(valid 0, pfn 0x7f)\n  --&gt; To Disk Sector Address 0xff6 --&gt; Value: 3\nVirtual Address 1e6f:\n --&gt; pde index:0x7  pde contents:(valid 1, pfn 0x3d)\n  --&gt; pte index:0x13  pte contents:(valid 0, pfn 0x16)\n  --&gt; To Disk Sector Address 0x2cf --&gt; Value: 1c", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 3, "bucket_name": "Yesterday", "no_upvotes": 0, "d-bucket": "Yesterday", "children": [], "type": "followup"}, {"uid": "i6roqnlkmtw", "no_answer": 0, "created": "2015-03-25T06:47:38Z", "id": "i7odcyxh10o6uw", "updated": "2015-03-25T06:47:38Z", "subject": "<p>李天润 刘鹤</p>\n<p></p>\n<p>Virtual Address 1c13: &#xff08;0-00111-00000-10011&#xff09;<br />           pde_index = 7, pde_ctx = bd(valid, page 3d), pte_index=0, pte_ctx=f6(invalid, disk 76)<br />           content = 12</p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 3, "bucket_name": "Yesterday", "no_upvotes": 0, "d-bucket": "Yesterday", "children": [], "type": "followup"}, {"uid": "i6uayov5SAo", "no_answer": 0, "created": "2015-03-25T06:53:21Z", "id": "i7odkbn1d0r3zv", "updated": "2015-03-25T06:53:21Z", "subject": "<p></p><div>\n<div>\n<p>李载隆 2012080061</p>\n<p></p>\n<p>Virtual Address 6653(0 11001 10010 10011):<br />--&gt; pde index:0x19(11001)</p>\n<p>      pde contents:(0x7f, 01111111, valid 0, pfn 0x7f)<br />      page 6c: e1 b5 a1 c1 b3 e4 a6 bd 7f 7f 7f 7f 7f 7f 7f 7f 7f 7f 7f 7f 7f 7f 7f 7f 7f 7f 7f 7f 7f 7f 7f 7f <br />--&gt; Fault (page directory entry not valid)</p>\n</div>\n</div>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 3, "bucket_name": "Yesterday", "no_upvotes": 0, "d-bucket": "Yesterday", "children": [], "type": "followup"}, {"uid": "i6tezdpdQbq", "no_answer": 0, "created": "2015-03-25T06:53:36Z", "id": "i7odknj1fk27l9", "updated": "2015-03-25T06:53:36Z", "subject": "<p>周昊</p>\n<p>2012011326</p>\n<pre>Virtual Address 6653:\n  --&gt; pde index:0x19  pde contents:(valid 0, pfn 0x7f)\n    --&gt; Page Fault\n          \nVirtual Address 1c13:\n  --&gt; pde index:0x7  pde contents:(valid 1, pfn 0x3d)\n    --&gt; pte index:0x0  pte contents:(valid 1, pfn 0x76)\n      --&gt; To Physical Address 0xed3 --&gt; Value: 12\n      \nVirtual Address 6890:\n  --&gt; pde index:0x1a  pde contents:(valid 1, pfn 0x7f)\n    --&gt; Page Fault\n\nVirtual Address 0af6:\n  --&gt; pde index:0x2  pde contents:(valid 1, pfn 0x21)\n    --&gt; pte index:0x17  pte contents:(valid 0, pfn 0x7f)\n      --&gt; To Disk Sector Address 0xff6 --&gt; Value: 03\n      \nVirtual Address 1e6f:\n  --&gt; pde index:0x7  pde contents:(valid 1, pfn 0x3d)\n    --&gt; pte index:0x13  pte contents:(valid 0, pfn 0x16)\n      --&gt; To Physical Address 0x2cf --&gt; Value: 1c</pre>\n<p></p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 3, "bucket_name": "Yesterday", "no_upvotes": 0, "d-bucket": "Yesterday", "children": [], "type": "followup"}, {"uid": "i7bq1v7feay2z9", "no_answer": 0, "created": "2015-03-25T06:53:57Z", "id": "i7odl367hnbqd", "updated": "2015-03-25T06:53:57Z", "subject": "<p>楼华哲  李日灵</p>\n<p></p>\n<pre><code>Virtual Address 6653:\n    --&gt; pde index:0x19  pde contents:(valid 0, pfn 0x7f)\n        --&gt; Page Fault\n\nVirtual Address 1c13:\n    --&gt; pde index:0x7   pde contents:(valid 1, pfn 0x3d)\n        --&gt; pte index:0     pte contents:(valid 1, pfn 0x76)\n            --&gt; To physical Address 0xed3 --&gt; Value: 12\n\nVirtual Address 6890:\n    --&gt; pde index:0x1a  pde contents:(valid 0, pfn 0x7f)\n        --&gt; Page Fault\n\nVirtual Address 0af6:\n    --&gt; pde index:0x2   pde contents:(valid valid 1, pfn 0x21)\n        --&gt; pte index:0x17  pte contents:(valid 0, pfn 0x7f)\n            --&gt; To Disk Sector Address 0xff6 --&gt; value: 03\n\nVirtual Address 1e6f:\n    --&gt; pde index:0x7   pde contents:(valid 1, pfn 0x3d)\n        --&gt; pte index:0x13  pte contents:(valid 0, pfn 0x16)\n            --&gt; To Disk Sector Address 0x2cf --&gt; Value: 1c</code></pre>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 3, "bucket_name": "Yesterday", "no_upvotes": 0, "d-bucket": "Yesterday", "children": [], "type": "followup"}, {"uid": "i6ub691ffHe", "no_answer": 0, "created": "2015-03-25T06:54:38Z", "id": "i7odlyz69sb6yp", "updated": "2015-03-25T06:54:38Z", "subject": "<p>VA&#xff1a;0x1c13(0 001_11 00_000 1_0011)</p>\n<p>pde页内偏移 = 0x7, pde_ctx = 0xbd(1 011_1101)</p>\n<p>在内存中&#xff0c;页号0x3d</p>\n<p>pte页内偏移 = 0x0&#xff0c; pte_ctx = 0xf6(1 111_0110)</p>\n<p>在内存中&#xff0c;页号0x76</p>\n<p>内容&#xff1a;0x12</p>\n<p></p>\n<p>王昊2012011341</p>\n<p>党唯真2012011324</p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 3, "bucket_name": "Yesterday", "no_upvotes": 0, "d-bucket": "Yesterday", "children": [], "type": "followup"}, {"uid": "i6ub3fzxa6a4ze", "no_answer": 0, "created": "2015-03-25T06:59:28Z", "id": "i7ods6mntuh231", "updated": "2015-03-25T06:59:28Z", "subject": "<p>写代码ing……</p>\n<p>张洵恺 2012011486</p>\n<p>徐梓哲 2012011487</p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 3, "bucket_name": "Yesterday", "no_upvotes": 0, "d-bucket": "Yesterday", "children": [{"uid": "i6ub3fzxa6a4ze", "created": "2015-03-25T07:04:13Z", "id": "i7odyaqsldl2h8", "updated": "2015-03-25T07:04:13Z", "subject": "<p>6653: 一级页表跪</p>\n<p>1c13: 12(page)</p>\n<p>6809: 一级页表跪</p>\n<p>0af6: 03(disk)</p>\n<p>1e6f: 1c(disk)</p>\n<p></p>\n<pre>f = open(&#34;0413_data.txt&#34;, &#34;r&#34;)\ndata = {line.split(&#34;:&#34;)[0] : line.split(&#34;:&#34;)[1].split() for line in f.readlines()}\n\nbtoi = lambda x: int(x, 2)\n\ndef itob(i):\n    b = bin(i)[2:]\n    b = &#39;0&#39; * (8 - len(b)) &#43; b\n    return b\n\n\ndef htob(b):\n    return itob(int(b, 16))\n\n\ndef btoh(b):\n    h = hex(int(b, 2))[2:]\n    h = &#39;0&#39; * (2 - len(h)) &#43; h\n    return h\n\n\ndef split_address(x):\n    b = bin(int(x, 16))[2:]\n    b = &#39;0&#39; * (16 - len(b)) &#43; b\n    b = b[1:]\n    return [b[0:5], b[5:10], b[10:15]]\n\n\ndef analyse(x):\n    i1, i2, offset = map(btoi, split_address(x))\n\n    pdbr = &#34;page 6c&#34;\n    pde_content = htob(data[pdbr][i1])\n\n    print &#34;PDE&#34;, pde_content\n    if pde_content[0] != &#39;1&#39;:\n        print &#34;INVALID PDE&#34;\n        return None\n\n    pfn = btoh(pde_content[1:])\n    pte_content = htob(data[&#34;page &#34; &#43; pfn][i2])\n\n    print &#34;PTE&#34;, pte_content\n    pfn = btoh(pte_content[1:])\n    \n    if pte_content[0] == &#39;1&#39;:\n        base = &#34;page &#34;\n    else:\n        base = &#34;disk &#34;\n\n    v = data[base &#43; pfn][offset]\n    return v\n\n\nif __name__ == &#34;__main__&#34;:\n    while True:\n        s = raw_input(&#34;V ADD &gt;&gt; &#34;)\n        print analyse(s)</pre>\n<p></p>\n<p></p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 3, "bucket_name": "Yesterday", "d-bucket": "Yesterday", "children": [], "type": "feedback"}], "type": "followup"}, {"uid": "i6vi7mt1I4G", "no_answer": 0, "created": "2015-03-25T07:01:31Z", "id": "i7odutqfdnt64g", "updated": "2015-03-25T07:01:31Z", "subject": "<p>6653 = 11001 10010 10011<br />11001在一级页表找到7f 无效 缺失</p>\n<p></p>\n<p>1c13 = 00111 00000 10011<br />找到bd 有效 3d里找第0个 f6 有效 找76的第19个 12</p>\n<p></p>\n<p>6809 = 11010 00000 01001<br />找到7f 无效</p>\n<p></p>\n<p>0af6 = 00010 10111 10110<br />找到a1 有效 26的第23个 7f 无效 在disk的7f里找10110(22) -&gt; 03<br /><br /></p>\n<p>1e6f = 00111 10011 01111<br />找到bd 有效 3d里的第19个 16 无效 在disk的16里找15 -&gt; 1c</p>\n<p></p>\n<p>袁源 2012011294</p>\n<p>黄杰 2012011272</p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 3, "bucket_name": "Yesterday", "no_upvotes": 0, "d-bucket": "Yesterday", "children": [{"uid": "i6sl02qfUgI", "created": "2015-03-25T07:32:08Z", "id": "i7oey75x8mf110", "updated": "2015-03-25T07:32:08Z", "subject": "<p>补充代码&#xff1a;</p>\n<p>f=file(&#39;mem.txt&#39;)<br />mem = []<br />line = f.readline()<br />while line:<br /> t=line.strip().split(&#39; &#39;)<br /> tt=[]<br /> #print line<br /> for i in range(2,len(t)):<br /> tt.append(t[i])<br /> mem.append(tt)<br /> line = f.readline()<br />f=file(&#39;disk.txt&#39;)<br />disk = []<br />line = f.readline()<br />while line:<br /> t=line.strip().split(&#39; &#39;)<br /> tt=[]<br /> #print line<br /> for i in range(2,len(t)):<br /> tt.append(t[i])<br /> disk.append(tt)<br /> line = f.readline()<br />a=0x1c13<br />print &#39;pde index:&#39;,hex(a&gt;&gt;10)<br />print &#39;pde content&#39;,mem[int(0x6c)][int(a&gt;&gt;10)]<br />pde_content=mem[int(0x6c)][int(a&gt;&gt;10)]<br />if (int(pde_content,16))&gt;&gt;7==1:<br /> print &#39;valid 1&#39;<br /> pfn = int(pde_content,16) &amp; 0x7f<br /> print &#39;pfn&#39;,hex(pfn)<br /> print &#39;pte index:&#39;,hex(a&gt;&gt;5 &amp; 0x1f)<br /> pte_index = a&gt;&gt;5 &amp; 0x1f<br /> print &#39;pte content&#39;,mem[pfn][pte_index]<br /> pte_content = mem[pfn][pte_index]<br /> if (int(pte_content,16))&gt;&gt;7==1:<br /> print &#39;valid 1&#39;<br /> pfn = int(pte_content,16) &amp; 0x7f<br /> print &#39;pfn&#39;,hex(pfn)<br /> print &#39;physical address&#39;,hex((pfn &lt;&lt; 5) |( a &amp; 0x1f))<br /> physical_address = (pfn &lt;&lt; 5) |( a &amp; 0x1f)<br /> print &#39;Value&#39;,mem[physical_address&gt;&gt;5][physical_address &amp; 0x1f]<br /> else:<br /> print &#39;valid 0&#39;<br /> pfn = int(pte_content,16) &amp; 0x7f<br /> print &#39;pfn&#39;,hex(pfn)<br /> print &#39;physical address&#39;,hex((pfn &lt;&lt; 5) |( a &amp; 0x1f))<br /> physical_address = (pfn &lt;&lt; 5) |( a &amp; 0x1f)<br /> print &#39;Value&#39;,disk[physical_address&gt;&gt;5][physical_address &amp; 0x1f]<br />else:<br /> print &#39;valid 0&#39;<br /> pfn = int(pde_content,16) &amp; 0x7f<br /> print &#39;pfn&#39;,hex(pfn)</p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 3, "bucket_name": "Yesterday", "d-bucket": "Yesterday", "children": [], "type": "feedback"}], "type": "followup"}, {"uid": "i6usx54odpz38p", "no_answer": 0, "created": "2015-03-25T07:02:08Z", "id": "i7odvmmenm51nr", "updated": "2015-03-25T07:02:08Z", "subject": "<p>2012011390  刘争争</p>\n<p>Virtual Address 6653:<br /> --&gt;pde_index: 0x19 <br /> Fault<br />Virtual Address 1c13:<br /> --&gt;pde_index: 0x7 pde contents:(0xbd, valid 1, pfn 0x3d(page 0x3d))<br /> --&gt;pte_index: 0x0 pte contents:(0xf6, valid 1, pfn 0x76(page 0x76))<br /> --&gt;To Physical Address is 0xed3 --Value:0x12<br />Virtual Address 6890:<br /> --&gt;pde_index: 0x1a <br /> Fault</p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 3, "bucket_name": "Yesterday", "no_upvotes": 0, "d-bucket": "Yesterday", "children": [], "type": "followup"}, {"uid": "i6uak1ivjzr1i0", "no_answer": 0, "created": "2015-03-25T07:02:25Z", "id": "i7odvzpahsy28k", "updated": "2015-03-25T07:02:25Z", "subject": "<p>徐天宇 2012011275</p>\n<p>韩慧阳 2012011276</p>\n<p></p>\n<p>Virtual Address 6653:<br /> --&gt; pde index:0x19 pde contents:(valid 0, pfn 0x7f)<br /> --&gt; Fault (page directory entry not valid)</p>\n<p></p>\n<p>Virtual Address 1c13:<br /> --&gt; pde index:0x7 pde contents:(valid 1, pfn 0x3d)<br /> --&gt; pte index:0x0 pte contents:(valid 1, pfn 0x76)<br /> --&gt; To Physical Address 0xed3 --&gt; Value: 12</p>\n<p></p>\n<p>Virtual Address 6890:<br /> --&gt; pde index:0x1a pde contents:(valid 0, pfn 0x7f)<br /> --&gt; Fault (page directory entry not valid)</p>\n<p></p>\n<p>Virtual Address 0af6:<br /> --&gt; pde index:0x2 pde contents:(valid 1, pfn 0x21)<br /> --&gt; pte index:0x17 pte contents:(valid 0, pfn 0x7f)<br /> --&gt; To Disk Sector Address 0xff6 --&gt; Value: 03</p>\n<p></p>\n<p>Virtual Address 1e6f:<br /> --&gt; pde index:0x7 pde contents:(valid 1, pfn 0x3d)<br /> --&gt; pte index:0x13 pte contents:(valid 0, pfn 0x16)<br /> --&gt; To Disk Sector Address 0x2cf --&gt; Value: 1c</p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 3, "bucket_name": "Yesterday", "no_upvotes": 0, "d-bucket": "Yesterday", "children": [], "type": "followup"}, {"uid": "i7bfq2txxyw689", "no_answer": 0, "created": "2015-03-25T07:03:18Z", "id": "i7odx3zb8y26k3", "updated": "2015-03-25T07:03:18Z", "subject": "<p>覃伟 计22 2012011278</p>\n<p>闵延泽 计22 2012011291</p>\n<p></p>\n<p>结果如下&#xff1a;</p>\n<p>Virtual Address 6653:</p>\n<p>  --&gt; pde index:0x19 pde contents:(0x7f, valid 0) <br />    --&gt;Fault</p>\n<p></p>\n<p>Virtual Address 1c13:<br /> --&gt; pde index:0x7 pde contents:(0xbd, valid 1, pfn 0x3d)<br />  --&gt; pte index:0x0 pte contents:(0xf6, valid 1, pfn 0x76)<br />   --&gt; To Physical Address 0xed3 --&gt; Value: 12 <br /> <br />Virtual Address 6890:<br /> --&gt; pde index:0x1a pde contents:(0x7f, valid 0) <br />  --&gt;Fault <br /> <br />Virtual Address 0af6:<br /> --&gt; pde index:0x2 pde contents:(0xa1, valid 1, pfn 0x21)<br />  --&gt; pte index:0x17 pte contents:(0x7f, valid 0, pfn 0x7f)<br />   --&gt; To Disk Sector Address 0xff6 --&gt; Value: 03 <br /> <br />Virtual Address 1e6f(0 001_11 10_011 0_1111):<br /> --&gt; pde index:0x7(00111) pde contents:(0xbd, 10111101, valid 1, pfn 0x3d)<br /> page 6c: e1 b5 a1 c1 b3 e4 a6 bd 7f 7f 7f 7f 7f 7f 7f 7f<br /> 7f 7f 7f 7f 7f 7f 7f 7f 7f 7f 7f 7f 7f 7f 7f 7f<br /> page 3d: f6 7f 5d 4d 7f 04 29 7f 1e 7f ef 51 0c 1c 7f 7f<br /> 7f 76 d1 16 7f 17 ab 55 9a 65 ba 7f 7f 0b 7f 7f <br />  --&gt; pte index:0x13 pte contents:(0x16, valid 0, pfn 0x16)<br /> disk 16: 00 0a 15 1a 03 00 09 13 1c 0a 18 03 13 07 17 1c <br /> 0d 15 0a 1a 0c 12 1e 11 0e 02 1d 10 15 14 07 13<br />   --&gt; To Disk Sector Address 0x2cf(0001011001111) --&gt; Value: 1c</p>\n<p></p>\n<p>代码如下&#xff1a;</p>\n<p>#include&lt;iostream&gt;<br />#include&lt;stdio.h&gt;<br />#include&lt;bitset&gt;<br />using namespace std;<br />unsigned int mypdbr[32];<br />int main()<br />{<br /> mypdbr[0]=0xe1;<br /> mypdbr[1]=0xb5;<br /> mypdbr[2]=0xa1;<br /> mypdbr[3]=0xc1;<br /> mypdbr[4]=0xb3;<br /> mypdbr[5]=0xe4;<br /> mypdbr[6]=0xa6;<br /> mypdbr[7]=0xbd;<br /> for(int i=8; i&lt;32; i&#43;&#43;)<br /> mypdbr[i]=0x7f;<br /> <br /> unsigned int pde_index, pde_context, pfn, pte_index, pte_contents;<br /> unsigned int offset;<br /> unsigned int value; <br /> <br /> unsigned int va;// = 0x0330;<br /> <br /> scanf(&#34;%08x&#34;,&amp;va);<br /> <br /> pde_index = (va&amp;0x07c00) &gt;&gt; 10;<br /> pte_index = (va&amp;0x03e0) &gt;&gt; 5;<br /> offset = (va&amp;0x01f);<br /> <br /> pde_context = mypdbr[pde_index];<br /> pfn = pde_context&amp;0x07f;<br /> value = (mypdbr[pde_index]&amp;0x080) &gt;&gt; 7;<br /> <br /> printf(&#34;pde_index:0x%08x\\npde_context:0x%08x\\npfn:0x%08x\\n&#34;,pde_index,pde_context,pfn);<br /> cout &lt;&lt; &#34;value:&#34; &lt;&lt; value &lt;&lt; endl;<br /> <br /> printf(&#34;\\npte_index:0x%08x\\noffset:0x%08x\\n\\n&#34;,pte_index,offset);<br /> <br /> scanf(&#34;%08x&#34;,&amp;pte_contents);<br /> //pte_contents = 0xe3;<br /> unsigned int value2 = (pte_contents&amp;0x080)&gt;&gt;7;<br /> unsigned int pfn2 = pte_contents&amp;0x7f;<br /> unsigned int pa = (pfn2&lt;&lt;5)&#43;offset;<br /> <br /> printf(&#34;pte_contents:0x%08x\\nvalue2:%d\\npfn2:0x%08x\\npa:0x%08x\\n&#34;,pte_contents,value2,pfn2,pa);<br /> <br /> return 0;<br />}</p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 3, "bucket_name": "Yesterday", "no_upvotes": 0, "d-bucket": "Yesterday", "children": [], "type": "followup"}, {"uid": "i6uayl3vEOz", "no_answer": 0, "created": "2015-03-25T07:03:30Z", "id": "i7odxduyq7z6ma", "updated": "2015-03-25T07:03:30Z", "subject": "<p>还在写代码。。。</p>\n<p>荣禹 2012011358</p>\n<p>李浩达 2012011382</p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 3, "bucket_name": "Yesterday", "no_upvotes": 0, "d-bucket": "Yesterday", "children": [], "type": "followup"}, {"uid": "i6utvrywozd2vd", "no_answer": 0, "created": "2015-03-25T07:04:25Z", "id": "i7odyk5kqmf32f", "updated": "2015-03-25T07:04:25Z", "subject": "<p>陈天昱 2012011348</p>\n<p>李心田 2012011338</p>\n<p></p>\n<p>Virtual Address  0x6653</p>\n<p> pde index:  0xd99  pde content: (valid  0 , pfn  0x7f ) </p>\n<p>  --&gt; Fault (page directory entry not valid)</p>\n<p>Virtual Address  0x1c13</p>\n<p> pde index:  0xd87  pde content: (valid  1 , pfn  0x3d ) </p>\n<p>  pte index:  0x7a0  pte content: (valid  1 , pfn  0x76 ) </p>\n<p>   --&gt; Translates to Physical Address  0xed3  --&gt; Value:  12</p>\n<p>Virtual Address  0x6890</p>\n<p> pde index:  0xd9a  pde content: (valid  0 , pfn  0x7f ) </p>\n<p>  --&gt; Fault (page directory entry not valid)</p>\n<p>Virtual Address  0xaf6</p>\n<p> pde index:  0xd82  pde content: (valid  1 , pfn  0x21 ) </p>\n<p>  pte index:  0x437  pte content: (valid  0 , pfn  0x7f ) </p>\n<p>   --&gt; To Disk Sector Address  4086  --&gt; Value:  03</p>\n<p>Virtual Address  0x1e6f</p>\n<p> pde index:  0xd87  pde content: (valid  1 , pfn  0x3d ) </p>\n<p>  pte index:  0x7b3  pte content: (valid  0 , pfn  0x16 ) </p>\n<p>   --&gt; To Disk Sector Address  719  --&gt; Value:  1c</p>\n<p></p>\n<pre>memory = list()\ndisk = list()\n\n# read two files respectively\nf = open(&#39;page_data&#39;, &#39;r&#39;)\n\nraw_line = f.readline()\nwhile(raw_line):\n    raw_line = (raw_line[9:]).strip()\n    memory.extend(raw_line.split(&#39; &#39;))\n    raw_line = f.readline()\n\nf = open(&#39;disk_data&#39;, &#39;r&#39;)\n\nraw_line = f.readline()\nwhile(raw_line):\n    raw_line = (raw_line[9:]).strip()\n    disk.extend(raw_line.split(&#39; &#39;))\n    raw_line = f.readline()\n\n# print &#39;memory: &#39;, len(memory)\n# print &#39;disk: &#39;, len(disk)\n\nPD_BASE = 0xd80\n\ndef va2pa(VA):\n    print &#39;Virtual Address &#39;, hex(VA)\n\n    m1 = 0b0111110000000000\n    m2 = 0b0000001111100000\n    m3 = 0b0000000000011111\n    p1 = (m1 &amp; VA) &gt;&gt; 10\n    p2 = (m2 &amp; VA) &gt;&gt; 5\n    offset = m3 &amp; VA\n\n    pde_index = PD_BASE &#43; p1\n    valid = (int(memory[pde_index], 16) &amp; 0b10000000) &gt;&gt; 7\n    pfn = int(memory[pde_index], 16) &amp; 0b01111111\n    print &#39;\\tpde index: &#39;, hex(pde_index), &#39; pde content: (valid &#39;, valid, &#39;, pfn &#39;, hex(pfn), &#39;) &#39;\n    if valid == 0:\n        print &#39;\\t\\t--&gt; Fault (page directory entry not valid)&#39;\n        return\n\n    pte_index = (pfn &lt;&lt; 5) &#43; p2\n    valid = (int(memory[pte_index], 16) &amp; 0b10000000) &gt;&gt; 7\n    pfn = int(memory[pte_index], 16) &amp; 0b01111111\n    print &#39;\\t\\tpte index: &#39;, hex(pte_index), &#39; pte content: (valid &#39;, valid, &#39;, pfn &#39;, hex(pfn), &#39;) &#39;\n    if valid == 0:\n        # print &#39;\\t\\t\\t--&gt; Fault (page table entry not valid)&#39;\n        addr = (pfn &lt;&lt; 5) &#43; offset\n        print &#39;\\t\\t\\t--&gt; To Disk Sector Address &#39;, addr, &#39; --&gt; Value: &#39;, disk[addr]\n        return\n\n    pa = (pfn &lt;&lt; 5) &#43; offset\n    print &#39;\\t\\t\\t--&gt; Translates to Physical Address &#39;, hex(pa), &#39; --&gt; Value: &#39;, memory[pa]\n\nva_list = [0x6653, 0x1c13, 0x6890, 0x0af6, 0x1e6f]\n\nfor va in va_list:\n    va2pa(va)</pre>\n<p></p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 3, "bucket_name": "Yesterday", "no_upvotes": 0, "d-bucket": "Yesterday", "children": [], "type": "followup"}, {"uid": "i71i9b92nrr7n4", "no_answer": 0, "created": "2015-03-25T07:05:32Z", "id": "i7odzznzj0730k", "updated": "2015-03-25T07:05:32Z", "subject": "<p>梁錫豪 2012011290</p>\n<p></p>\n<p><br />def read_mem(fname):<br /> fobj = open(fname, &#39;r&#39;)<br /> mem = []<br /> text = []<br /> for line in fobj:<br /> text.append(line[0:len(line) - 1])<br /> line = line.split(&#39;:&#39;)[1].split(&#39; &#39;)<br /> del line[len(line) - 1], line[0]<br /> for i in range(len(line)):<br /> line[i] = int(line[i], 16)<br /> mem.append(line)<br /> print mem[0]<br /> return mem, text</p>\n<p>def page_num(addr):<br /> return addr &gt;&gt; 5</p>\n<p>def print_hex(num):<br /> print &#39;0x%08x&#39;%num</p>\n<p>if __name__ == &#39;__main__&#39;:<br /> disk, disk_text = read_mem(&#39;disk.txt&#39;)<br /> mem, mem_text = read_mem(&#39;mem.txt&#39;)<br /> pdbr = 0xd80<br /> pnum = page_num(pdbr)<br /> print_hex(pnum)</p>\n<p>vas = [0x0330, 0x1e6f]<br /> for va in vas:<br /> print &#39;Virtual Address %04x(%s):&#39;%(va, bin(va))</p>\n<p>pde = (va &gt;&gt; 10) &amp; 0b11111<br /> pde_content = mem[pnum][pde]<br /> valid = pde_content &gt;&gt; 7 &amp; 0b01<br /> pfn = pde_content &amp; 0b01111111<br /> print (<br /> &#39; --&gt; pde index:0x%08x pde contents:(&#39;<br /> &#39;0x%02x, %s, valid %d, pfn 0x%02x)&#39;%<br /> (<br /> pde, pde_content, bin(pde_content), valid, pfn<br /> )<br /> )<br /> print &#39; &#39; &#43; mem_text[pnum]<br /> print &#39; &#39; &#43; mem_text[pfn]</p>\n<p><br /> if valid == 0:<br /> continue</p>\n<p>pte = (va &gt;&gt; 5) &amp; 0b11111<br /> pte_content = mem[pfn][pte]<br /> print &#39;pte contents:0x%08x&#39;%(pte_content)<br /> valid = pte_content &gt;&gt; 7 &amp; 0b01<br /> print &#39;valid %d&#39;%valid<br /> pfn = pte_content &amp; 0b01111111<br /> print &#39;pfn 0x%08x&#39;%(pfn)</p>\n<p>index = (va &amp; 0b11111)<br /> <br /> value = 0<br /> if valid == 1:<br /> value = mem[pfn][index]<br /> elif pfn != 0x7f:<br /> value = disk[pfn][index]<br /> else:<br /> continue</p>\n<p>pa = (pfn &lt;&lt; 5) | index<br /> print &#39;To Physical Address 0x%08x&#39;%(pfn)<br /> print &#39;Value: 0x%02x&#39;%value</p>\n<p></p>\n<p></p>\n<p>#output pattern not finished</p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 3, "bucket_name": "Yesterday", "no_upvotes": 0, "d-bucket": "Yesterday", "children": [], "type": "followup"}, {"uid": "i6ut1sgpijq", "no_answer": 0, "created": "2015-03-25T07:06:18Z", "id": "i7oe0yu7rwx7br", "updated": "2015-03-25T07:06:18Z", "subject": "<p>王振      2012011397</p>\n<p>Virtual Address 6653:<br /> --&gt; pde index:0x19 pde contents:(valid 0, pfn 0x7f)<br /> Fault (page directory entry not valid)<br />Virtual Address 1c13:<br /> --&gt; pde index:0x7 pde contents:(valid 1, pfn 0x3d)<br /> --&gt; pte index:0x0 pte contents:(valid 1, pfn 0x76)<br /> --&gt; Translates to Physical Address 0xed3 --&gt; Value:12<br />Virtual Address 6890:<br /> --&gt; pde index:0x1a pde contents:(valid 0, pfn 0x7f)<br /> Fault (page directory entry not valid)<br />Virtual Address af6:<br /> --&gt; pde index:0x2 pde contents:(valid 1, pfn 0x21)<br /> --&gt; pte index:0x17 pte contents:(valid 0, pfn 0x7f)<br /> --&gt; To Disk Sector Address 0xff6 --&gt; Value: 3<br />Virtual Address 1e6f:<br /> --&gt; pde index:0x7 pde contents:(valid 1, pfn 0x3d)<br /> --&gt; pte index:0x13 pte contents:(valid 0, pfn 0x16)<br /> --&gt; To Disk Sector Address 0x2cf --&gt; Value: 1c</p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 3, "bucket_name": "Yesterday", "no_upvotes": 0, "d-bucket": "Yesterday", "children": [], "type": "followup"}, {"uid": "i7bg4v1keqE", "no_answer": 0, "created": "2015-03-25T07:24:47Z", "id": "i7oeoqlblh96wb", "updated": "2015-03-25T07:24:47Z", "subject": "<p>Virtual Address 6653:<br /> --&gt; pde index:0x19 pde contents:(valid 0, pfn 0x7f)<br /> --&gt;Fault (page directory entry not valid)<br />Virtual Address 1c13:<br /> --&gt; pde index:0x7 pde contents:(valid 1, pfn 0x3d)<br /> --&gt; pte index:0x0 pte contents:(valid 1, pfn 0x76)<br /> --&gt; Translates to Physical Address 0xed3 --&gt; Value:12<br />Virtual Address 6890:<br /> --&gt; pde index:0x1a pde contents:(valid 0, pfn 0x7f)<br /> --&gt;Fault (page directory entry not valid)<br />Virtual Address af6:<br /> --&gt; pde index:0x2 pde contents:(valid 1, pfn 0x21)<br /> --&gt; pte index:0x17 pte contents:(valid 0, pfn 0x7f)<br /> --&gt; To Disk Sector Address 0xff6 --&gt; Value: 3<br />Virtual Address 1e6f:<br /> --&gt; pde index:0x7 pde contents:(valid 1, pfn 0x3d)<br /> --&gt; pte index:0x13 pte contents:(valid 0, pfn 0x16)<br /> --&gt; To Disk Sector Address 0x2cf --&gt; Value: 1c</p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 3, "bucket_name": "Yesterday", "no_upvotes": 0, "d-bucket": "Yesterday", "children": [{"uid": "i7bg4v1keqE", "created": "2015-03-25T07:25:09Z", "id": "i7oep7kljmp7fo", "updated": "2015-03-25T07:25:09Z", "subject": "<p>王妍 2012011352</p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 3, "bucket_name": "Yesterday", "d-bucket": "Yesterday", "children": [], "type": "feedback"}], "type": "followup"}, {"uid": "i6usx54odpz38p", "no_answer": 0, "created": "2015-03-25T07:32:23Z", "id": "i7oeyijif2e1hm", "updated": "2015-03-25T07:32:23Z", "subject": "<p>2012011390 刘争争</p>\n<p>Virtual Address 6653:<br /> --&gt;pde_index: 0x19 pde contents:(0x7f, valid 0, pfn 0x7f(page 0x7f))<br /> Page Fault<br />Virtual Address 1c13:<br /> --&gt;pde_index: 0x7 pde contents:(0xbd, valid 1, pfn 0x3d(page 0x3d))<br /> --&gt;pte_index: 0x0 pte contents:(0xf6, valid 1, pfn 0x76(page 0x76))<br /> --&gt;To Physical Address is 0xed3 --Value:0x12<br />Virtual Address 6890:<br /> --&gt;pde_index: 0x1a pde contents:(0x7f, valid 0, pfn 0x7f(page 0x7f))<br /> Fault<br />Virtual Address 0af6:<br />--&gt;pde_index: 0x2 pde contents:(0xa1, valid 1, pfn 0x21(page 0x21))<br /> --&gt;pte_index: 0x17 pte contents:(0x7f, valid 0, pfn 0x7f) <br /> --&gt;disk 0x7f<br /> --&gt;To Disk Sector Address is ff6 --&gt;Value is 0x03<br />Virtual Address 1e6f:<br /> --&gt;pde_index: 0x7 pde contents:(0xbd, valid 1, pfn 0x3d(page 0x3d))<br /> --&gt;pte_index:0x13 pte contents:(0x16, valid 0, pfn 0x16)<br /> --&gt;disk 0x16 <br /> --&gt;To Disk Sector Address is 0x2cf --&gt;Value is 0x1c</p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 3, "bucket_name": "Yesterday", "no_upvotes": 0, "d-bucket": "Yesterday", "children": [], "type": "followup"}, {"uid": "i6rgfjo5j1r6c", "no_answer": 0, "created": "2015-03-25T08:48:26Z", "id": "i7ohob8zx7z4vk", "updated": "2015-03-25T08:48:26Z", "subject": "<p>梁俊邦 2012011375</p>\n<p></p>\n<p>Virtual Address 6653:</p>\n<p>  --&gt;pde index:0x19 pde contents:(valid 0, pfn 7f)</p>\n<p>    Fault (page directory entry not valid)</p>\n<p>Virtual Address 1c13:</p>\n<p>  --&gt;pde index:0x07 pde contents:(valid 1, pfn 3d)</p>\n<p>    --&gt;pte index:0x00 pte contents:(valid 1, pt 76)</p>\n<p>      --&gt;To Physical Address 0xed3 --&gt; Value: 12</p>\n<p>Virtual Address 6890:</p>\n<p>  --&gt;pde index:0x1a pde contents:(valid 0, pfn 7f)</p>\n<p>    Fault (page directory entry not valid)</p>\n<p>Virtual Address 0af6:</p>\n<p>  --&gt;pde index:0x02 pde contents:(valid 1, pfn 21)</p>\n<p>    --&gt;pte index:0x17 pte contents:(valid 0, pt 7f)</p>\n<p>      --&gt;To Disk Sector Page 0x7f, Fatal.</p>\n<p>Virtual Address 1e6f:</p>\n<p>  --&gt;pde index:0x07 pde contents:(valid 1, pfn 3d)</p>\n<p>    --&gt;pte index:0x13 pte contents:(valid 0, pt 16)</p>\n<p>      --&gt;To Disk Sector Address 0x2cf --&gt; Value: 1c</p>\n<p></p>\n<p>code:</p>\n<p></p>\n<p>#include &lt;iostream&gt;<br />#include &lt;cstdio&gt;<br />#include &lt;cstring&gt;<br />using namespace std;</p>\n<p>const int va[5] = {0x6653,0x1c13,0x6890,0x0af6,0x1e6f};<br />const int init_page = 0x6c;</p>\n<p>unsigned mem[0x80][0x20], disk[0x80][0x20];</p>\n<p>void solve(int va)<br />{<br /> printf(&#34;Virtual Address %04x:\\n&#34;, va);<br /> int idx = va&gt;&gt;10;<br /> int ctx = mem[init_page][idx];<br /> printf(&#34; --&gt;pde index:0x%02x pde contents:(valid %d, pfn %02x)\\n&#34;, idx, (ctx&gt;&gt;7), (ctx&amp;127));<br /> if ((ctx&gt;&gt;7)==0)<br /> {<br /> printf(&#34; --&gt;Fault (page directory entry not valid)\\n&#34;);<br /> return;<br /> }<br /> idx = ((va&gt;&gt;5)&amp;31);<br /> ctx = mem[ctx&amp;127][idx];<br /> printf(&#34; --&gt;pte index:0x%02x pte contents:(valid %d, pt %02x)\\n&#34;, idx, (ctx&gt;&gt;7), (ctx&amp;127));<br /> if (ctx&gt;&gt;7)<br /> {<br /> idx = (va&amp;31);<br /> int add = ((ctx&amp;127)&lt;&lt;5)&#43;idx;<br /> printf(&#34; --&gt;To Physical Address 0x%03x --&gt; Value: %02x\\n&#34;, add, mem[ctx&amp;127][idx]);<br /> return;<br /> }<br /> if ((ctx&amp;127) != 0x7f)<br /> {<br /> idx = (va&amp;31);<br /> int add = ((ctx&amp;127)&lt;&lt;5)&#43;idx;<br /> printf(&#34; --&gt;To Disk Sector Address 0x%03x --&gt; Value: %02x\\n&#34;, add, disk[ctx&amp;127][idx]);<br /> return;<br /> }<br /> printf(&#34; --&gt;To Disk Sector Page 0x7f, Fatal.\\n&#34;);<br />}</p>\n<p>void read_page(int x, int y)<br />{<br /> char ch;<br /> for (int i = 0; i &lt; 8; &#43;&#43;i)<br /> scanf(&#34;%c&#34;, &amp;ch);<br /> for (int i = 0x00; i &lt; 0x20; &#43;&#43;i)<br /> {<br /> scanf(&#34;%c&#34;, &amp;ch);//cout &lt;&lt; ch;<br /> scanf(&#34;%c&#34;, &amp;ch);//cout &lt;&lt; ch;<br /> unsigned tmp = (ch&lt;=&#39;9&#39;?ch-&#39;0&#39;:ch-&#39;a&#39;&#43;10);<br /> scanf(&#34;%c&#34;, &amp;ch);//cout &lt;&lt; ch;<br /> //mem[i] = tmp * 16 &#43; (ch&lt;=&#39;9&#39;?ch-&#39;0&#39;:ch-&#39;a&#39;&#43;10);cout &lt;&lt; mem[i] &lt;&lt; endl;<br /> tmp = tmp * 16 &#43; (ch&lt;=&#39;9&#39;?ch-&#39;0&#39;:ch-&#39;a&#39;&#43;10);<br /> //cout &lt;&lt; tmp &lt;&lt; endl;<br /> if (y == 0)<br /> mem[x][i] = tmp;<br /> else<br /> disk[x][i] = tmp;<br /> }<br /> while (ch != &#39;\\n&#39;)scanf(&#34;%c&#34;, &amp;ch);//cout &lt;&lt; ch &lt;&lt; &#34;end&#34; &lt;&lt; endl;<br />}</p>\n<p>void mem_init()<br />{<br /> freopen(&#34;a.txt&#34;, &#34;r&#34;, stdin);<br /> for (int i = 0x00; i &lt; 0x80; &#43;&#43;i)<br /> read_page(i, 0);<br /> for (int i = 0x00; i &lt; 0x80; &#43;&#43;i)<br /> read_page(i, 1);<br />}</p>\n<p>int main()<br />{<br /> mem_init();<br /> //cout &lt;&lt; mem[0][0] &lt;&lt; endl;<br /> for (int i = 0; i &lt; 5; &#43;&#43;i)<br /> solve(va[i]);<br /> return 0;<br />}</p>", "anon": "no", "folders": [], "config": {}, "data": {"embed_links": null}, "bucket_order": 3, "bucket_name": "Yesterday", "no_upvotes": 0, "d-bucket": "Yesterday", "children": [], "type": "followup"}], "type": "note", "unique_views": 86, "created": "2015-03-25T06:35:25Z", "id": "i7ocx91t47w12c", "tags": ["instructor-note", "quiz8"], "nr": 175, "data": {"embed_links": []}, "upvote_ids": [], "is_tag_good": false, "config": {}, "folders": ["quiz8"], "bucket_order": 2, "change_log": [{"uid": "hdjonbiyfs62ie", "when": "2015-03-25T06:35:25Z", "data": "i7ocx91y8bo12f", "anon": "no", "type": "create"}, {"uid": "i6s09f3xHOf", "when": "2015-03-25T06:38:12Z", "to": "i7ocx91t47w12c", "anon": "no", "type": "followup"}, {"uid": "i6uunp7jxDb", "when": "2015-03-25T06:38:57Z", "to": "i7ocx91t47w12c", "anon": "no", "type": "followup"}, {"uid": "i6t6y9snjx2", "when": "2015-03-25T06:40:40Z", "to": "i7ocx91t47w12c", "anon": "no", "type": "followup"}, {"uid": "hs2ssz7dkh76h6", "when": "2015-03-25T06:42:26Z", "to": "i7ocx91t47w12c", "anon": "no", "type": "followup"}, {"uid": "i6tawpo5Fm8", "when": "2015-03-25T06:43:13Z", "to": "i7ocx91t47w12c", "anon": "no", "type": "followup"}, {"uid": "i6s09f3xHOf", "when": "2015-03-25T06:47:05Z", "to": "i7ocx91t47w12c", "anon": "no", "type": "feedback"}, {"uid": "i6roqnlkmtw", "when": "2015-03-25T06:47:38Z", "to": "i7ocx91t47w12c", "anon": "no", "type": "followup"}, {"uid": "i6uayov5SAo", "when": "2015-03-25T06:53:21Z", "to": "i7ocx91t47w12c", "anon": "no", "type": "followup"}, {"uid": "i6tezdpdQbq", "when": "2015-03-25T06:53:36Z", "to": "i7ocx91t47w12c", "anon": "no", "type": "followup"}, {"uid": "i7bq1v7feay2z9", "when": "2015-03-25T06:53:57Z", "to": "i7ocx91t47w12c", "anon": "no", "type": "followup"}, {"uid": "i6ub691ffHe", "when": "2015-03-25T06:54:38Z", "to": "i7ocx91t47w12c", "anon": "no", "type": "followup"}, {"uid": "i6ub3fzxa6a4ze", "when": "2015-03-25T06:59:28Z", "to": "i7ocx91t47w12c", "anon": "no", "type": "followup"}, {"uid": "i6vi7mt1I4G", "when": "2015-03-25T07:01:31Z", "to": "i7ocx91t47w12c", "anon": "no", "type": "followup"}, {"uid": "i6usx54odpz38p", "when": "2015-03-25T07:02:08Z", "to": "i7ocx91t47w12c", "anon": "no", "type": "followup"}, {"uid": "i6uak1ivjzr1i0", "when": "2015-03-25T07:02:25Z", "to": "i7ocx91t47w12c", "anon": "no", "type": "followup"}, {"uid": "i7bfq2txxyw689", "when": "2015-03-25T07:03:18Z", "to": "i7ocx91t47w12c", "anon": "no", "type": "followup"}, {"uid": "i6uayl3vEOz", "when": "2015-03-25T07:03:30Z", "to": "i7ocx91t47w12c", "anon": "no", "type": "followup"}, {"uid": "i6ub3fzxa6a4ze", "when": "2015-03-25T07:04:13Z", "to": "i7ocx91t47w12c", "anon": "no", "type": "feedback"}, {"uid": "i6utvrywozd2vd", "when": "2015-03-25T07:04:25Z", "to": "i7ocx91t47w12c", "anon": "no", "type": "followup"}, {"uid": "i71i9b92nrr7n4", "when": "2015-03-25T07:05:32Z", "to": "i7ocx91t47w12c", "anon": "no", "type": "followup"}, {"uid": "i6ut1sgpijq", "when": "2015-03-25T07:06:18Z", "to": "i7ocx91t47w12c", "anon": "no", "type": "followup"}, {"uid": "i7bg4v1keqE", "when": "2015-03-25T07:24:47Z", "to": "i7ocx91t47w12c", "anon": "no", "type": "followup"}, {"uid": "i7bg4v1keqE", "when": "2015-03-25T07:25:09Z", "to": "i7ocx91t47w12c", "anon": "no", "type": "feedback"}, {"uid": "i6sl02qfUgI", "when": "2015-03-25T07:32:08Z", "to": "i7ocx91t47w12c", "anon": "no", "type": "feedback"}, {"uid": "i6usx54odpz38p", "when": "2015-03-25T07:32:23Z", "to": "i7ocx91t47w12c", "anon": "no", "type": "followup"}, {"uid": "i6rgfjo5j1r6c", "when": "2015-03-25T08:48:26Z", "to": "i7ocx91t47w12c", "anon": "no", "type": "followup"}, {"uid": "hdjonbiyfs62ie", "when": "2015-03-25T10:48:04Z", "to": "i7ocx91t47w12c", "anon": "no", "type": "feedback"}], "bucket_name": "Today", "request_instructor_me": false, "no_answer_followup": 0, "num_favorites": 0, "tag_good": []}}